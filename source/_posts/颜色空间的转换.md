---
title: 颜色空间的转换
categories: 渲染
---

在[色彩空间介绍](https://silence394.github.io/2018/06/28/%E9%A2%9C%E8%89%B2%E7%A9%BA%E9%97%B4%E4%BB%8B%E7%BB%8D/)文章中介绍了做渲染常用的色彩空间。渲染空间可以分为设备无关的颜色空间如CIE XYZ颜色空间和设备有关的颜色空间如常用的RGB颜色空间。不同的设备可能会采用不同的颜色空间，我们希望看到的结果肯定是在某个设备上做出来的渲染效果，到另外一个设备上能与原设备显示的颜色一致。例如CIE XYZ是设备无关的颜色空间， sRGB是设备有关的颜色空间，可以将sRGB的颜色空间的颜色转换到CIE XYZ颜色空间，再转换到另外一个颜色空间，就能保证最终看到的效果是一样的。

### CIE RGB与CIE XYZ的转换
上一篇的文章中有介绍过，CIE XYZ空间实际上是由CIE RGB空间经过一个线性变化把色匹配函数的负值去掉了。二者都是线性空间。由CIE给出的这两个空间的转换公式为：

```math
\begin{bmatrix}
R\\ 
G\\ 
B
\end{bmatrix}
=
\begin{bmatrix}
0.41847 & -0.15866 & -0.082835\\ 
-0.091169 & 0.25243 & 0.015708\\ 
0.0009209 & -0.0025498 & 0.17860 
\end{bmatrix}
\cdot 
\begin{bmatrix}
X\\ 
Y\\ 
Z
\end{bmatrix}
```

<img src="http://latex.codecogs.com/gif.latex?\large&space;\begin{bmatrix}&space;X\\&space;Y\\&space;Z&space;\end{bmatrix}&space;=&space;\begin{bmatrix}&space;2.7688&space;&&space;1.7517&space;&&space;1.1301\\&space;1.0&space;&&space;4.5906&space;&&space;0.0601\\&space;0.0&space;&&space;0.0565&space;&&space;5.5942&space;\end{bmatrix}&space;\cdot&space;\begin{bmatrix}&space;R\\&space;G\\&space;B&space;\end{bmatrix}" title="\large \begin{bmatrix} X\\ Y\\ Z \end{bmatrix} = \begin{bmatrix} 2.7688 & 1.7517 & 1.1301\\ 1.0 & 4.5906 & 0.0601\\ 0.0 & 0.0565 & 5.5942 \end{bmatrix} \cdot \begin{bmatrix} R\\ G\\ B \end{bmatrix}" />

<img src="http://latex.codecogs.com/gif.latex?\large&space;\begin{bmatrix}&space;R\\&space;G\\&space;B&space;\end{bmatrix}&space;=&space;\begin{bmatrix}&space;0.41847&space;&&space;-0.15866&space;&&space;-0.082835\\&space;-0.091169&space;&&space;0.25243&space;&&space;0.015708\\&space;0.0009209&space;&&space;-0.0025498&space;&&space;0.17860&space;\end{bmatrix}&space;\cdot&space;\begin{bmatrix}&space;X\\&space;Y\\&space;Z&space;\end{bmatrix}" title="\large \begin{bmatrix} R\\ G\\ B \end{bmatrix} = \begin{bmatrix} 0.41847 & -0.15866 & -0.082835\\ -0.091169 & 0.25243 & 0.015708\\ 0.0009209 & -0.0025498 & 0.17860 \end{bmatrix} \cdot \begin{bmatrix} X\\ Y\\ Z \end{bmatrix}" />




### CIE XYZ与sRGB空间的转换
定义RGB颜色空间需要定下来RGB三基色在CIE XYZ空间的坐标以及白色点的坐标。以设计师作图常用的sRGB空间为例。其sRGB颜色空间定义在XYZ空间的坐标如下：

参考点 | XYZ坐标
---|---
R | ()
G | ()
B | ()
White(D65) | (0.95045, 1.0, 1.08883)



### 参考
1. http://www.brucelindbloom.com/index.html?Eqn_ChromAdapt.html
2. http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html
3. https://en.wikipedia.org/wiki/SRGB
4. https://zhuanlan.zhihu.com/p/24281841